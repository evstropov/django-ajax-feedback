!function(e){function a(e,a,s){e.prepend('<div class="alert alert-'+s+' fade in ajax-feedback-msg"><a class="close" data-dismiss="alert" href="#" aria-hidden="true">&times;</a>'+a+"</div>")}function s(e,s,l){console.log(e.data),a(l,e.data,"success")}function l(e,a){a.find("input[type=text], textarea").val("")}function n(s,l,n){e.each(s.data,function(e,s){if("__all__"==e)a(n,s,"danger");else{var r=l.find("#id_"+e);r.parents(".form-group").addClass("has-error"),r.after('<span class="help-block help-block-error">'+s+"</span>")}})}e.fn.ajaxFeedback=function(a){var r=e(this);a=e.extend({messagesBlock:r,beforeSend:null,successCallback:s,validationErrorCallback:n,errorCallback:null,completeCallback:l},a),r.on("submit",function(s){s.preventDefault(),e(this).hasClass("disabled")||e.ajax({data:r.serialize(),dataType:"json",type:"POST",url:r.attr("action"),error:a.errorCallback,beforeSend:function(){e.isFunction(a.beforeSend)&&a.beforeSend(r,a.messagesBlock),r.find(".ajax-feedback-msg").remove(),r.find(".has-error").find(".help-block-error").remove().end().removeClass("has-error")},success:function(s){1==s.status?e.isFunction(a.successCallback)&&a.successCallback(s,r,a.messagesBlock):a.validationErrorCallback(s,r,a.messagesBlock)},complete:function(){e.isFunction(a.completeCallback)&&a.completeCallback(r,r,a.messagesBlock)}})})}}(jQuery);